@model IEnumerable<CartItemService.Services.CartItem>

<style>
    /* Popup styles */
    .popup {
        display: none; /* Hidden by default */
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 80%;
        max-width: 600px;
        background-color: white;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        z-index: 1000;
        padding: 20px;
        overflow: auto;
    }

    /* Popup overlay */
    .popup-overlay {
        display: none; /* Hidden by default */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
    }

    /* Show popup */
    .popup.show {
        display: block;
    }

    .popup-overlay.show {
        display: block;
    }

    /* Close button styles */
    .popup-close {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 20px;
        cursor: pointer;
    }
</style>

<!-- Cart icon -->
<button id="cartIcon" class="btn btn-primary">
    <i class="fas fa-shopping-cart"></i>
    Cart
</button>

<!-- Popup overlay -->
<div id="popupOverlay" class="popup-overlay"></div>

<!-- Popup content -->
<div id="popup" class="popup">
    <span id="popupClose" class="popup-close">&times;</span>
    <h2 class="text-center mb-5">Your Shopping Cart</h2>

    @if (Model == null || !Model.Any())
    {
        <p>Your cart is empty.</p>
    }
    else
    {
        <table class="table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.Name</td>
                        <td>@item.Price</td>
                        <td>@item.Quantity</td>
                        <td>@(item.Price * item.Quantity)</td>
                    </tr>
                }
            </tbody>
        </table>
    }
</div>

<!-- JavaScript to toggle popup visibility -->
<script>
    document.getElementById('cartIcon').addEventListener('click', function () {
        document.getElementById('popup').classList.toggle('show');
        document.getElementById('popupOverlay').classList.toggle('show');
    });

    document.getElementById('popupClose').addEventListener('click', function () {
        document.getElementById('popup').classList.remove('show');
        document.getElementById('popupOverlay').classList.remove('show');
    });

    document.getElementById('popupOverlay').addEventListener('click', function () {
        document.getElementById('popup').classList.remove('show');
        document.getElementById('popupOverlay').classList.remove('show');
    });
</script>
